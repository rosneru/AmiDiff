# Makefile
#
# Last update : Mon, 18 Feb 2019, 10:36
#
# This file was auto generated by makegen, an automatic makefile generator.
#
# Repository : https://github.com/reinhardlinardi/makegen
# Maintainer : segfault1001

# Compiler

COMPILER := /opt/amiga/bin/m68k-amigaos-c++

# Flags

COMPILE_FLAGS := -Wall -Wno-unused-function -noixemul -exceptions -Os -g0
LINKING_FLAGS := -noixemul

# Source code

SRC_ROOT := src
SRC_DIRS := $(shell find $(SRC_ROOT) -type d)
SRC_FILES := $(shell find $(SRC_ROOT) -name '*.cpp' -type f)

# Build

OBJ_DIR := bin
EXEC_BINARY_DIR := .
OBJ_FILES := $(addprefix $(OBJ_DIR)/, $(notdir $(patsubst %.cpp, %.o, $(SRC_FILES))))
EXEC_BINARY_NAME := ADiffView-gcc62
EXEC_BINARY := $(EXEC_BINARY_DIR)/$(EXEC_BINARY_NAME)

# Rules

.PHONY : clean
VPATH = $(SRC_DIRS)

$(EXEC_BINARY): $(OBJ_FILES) | $(EXEC_BINARY_DIR)
	@echo "[94mLinking $@ ...[0m"
	@$(COMPILER) -o $@ $^ $(LINKING_FLAGS)

$(EXEC_BINARY_DIR):
	@mkdir -p $@

$(OBJ_DIR)/%.o: %.cpp | $(OBJ_DIR)
	@echo "[94mCompiling $< ...[0m"
	@$(COMPILER) -o $@ -c $< $(COMPILE_FLAGS)

$(OBJ_DIR):
	@mkdir -p $@

clean:
	@echo "Cleaning up ..."
	@rm $(EXEC_BINARY) $(OBJ_DIR)/*.o